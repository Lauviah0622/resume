---
import Project from '../components/Project.astro';
import Block from '../components/Block.astro';
import multilangSpliter, { type LangProps } from '../utils/multilangSpliter.js';

export interface Props extends LangProps {}

const { lang = 'tw' } = Astro.props;

const files = await Astro.glob('../content/projects/*.md');
const mds = multilangSpliter(files, lang) as MD[];
---

<Block header="Projects">
  {
    mds.sort().map(({ frontmatter, Content }) => {
      return (
        <Project
          cover={frontmatter.cover}
          title={frontmatter.title}
          link={frontmatter.link}
        >
          <Content />
        </Project>
      );
    })
  }
</Block>
