---
import Period from './Period.astro';
import Header from '../../components/Header/Header.astro';
import multilangSpliter, {
  type MD,
  type LangProps,
} from '../../utils/multilangSpliter.js';

export interface Props extends LangProps {}
const { lang = 'tw' } = Astro.props;

const files = await Astro.glob('./src/*.md');
const mds = (await multilangSpliter(files, lang)) as MD[];

---

<section>
  <Header>Experiece</Header>
  <div class="content">
    {
      mds.sort().map(({ frontmatter, Content }) => {
        return (
          <Period
            to={frontmatter.to}
            from={frontmatter.from}
            title={frontmatter.title}
            company={frontmatter.company}
            type={frontmatter.type}
          >
            <Content />
          </Period>
        );
      })
    }
  </div>
</section>
